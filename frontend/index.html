<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Main App</title>
  <!-- Materialize CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
</head>

<body>
  <h3>This is Just a Testing App</h3>

  <table>
    <thead>
      <tr>
        <th>Id</th>
        <th>Full Name</th>
        <th>Company</th>
        <th>Email</th>
      </tr>
    </thead>

    <!-- Nanti data akan tampil di sini -->
    <tbody id="isiTabel">

    </tbody>
  </table>

  <!-- Materialize JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

  <script language='javascript'>
    // kita akan mengambil data dari server backend kita
    // supaya cepat, kita bisa menggunakan vanillajs punya fetch
    // https://gomakethings.com/how-to-use-the-fetch-api-with-vanilla-js/

    // ingat server express kita ada di port 3000 kan?
    fetch('http://localhost:3000/')
      .then(function fetchHandler(response) {
        // response = data yang diterima

        // pengiriman dalam bentuk string, jadi kita butuh
        // konversi ke json lagi
        response = JSON.parse(response);

        let tableContent = document.getElementById("isiTabel");

        let contentHtml = "";

        // looping data response untuk bentuk isi tabel
        for(let counter = 0; counter < response.length; counter++) {
          contentHtml += "<tr>";
          contentHtml += "<td>" + response[counter].id + "</td>";
          contentHtml += "<td>" + response[counter].name.first + ' ' + response[counter].name.last + ' ' + "</td>";
          contentHtml += "<td>" + response[counter].company + "</td>";
          contentHtml += "<td>" + response[counter].email + "</td>";
          contentHtml += "</tr>";
        }

        tableContent.innerHTML = contentHtml;
      })
      .catch(function errorHandler(err) {
        // tampilin error ke console
        console.log(err);
      });
  </script>
</body>

</html>